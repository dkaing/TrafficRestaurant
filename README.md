# Application for Predicting Traffic Time of Yelp-Reviewed Restaurants

Imagine you and that special individual are planning to go to an Italian restaurant in New York. You search on Yelp and after countless hours of browsing through these results, you finally select a restaurant. Just to be safe, you decide to make a reservation 3 months before the actual date. It is now that exciting day that you and your date have been waiting for. The reservation is at 5 PM and you both decided to leave at 4 pm thinking that traffic wouldn’t be that horrible. To your surprise and dissatisfaction, the traffic took a total of 3 hours to drive from your home to the restaurant! Your reservation was cancelled, you both were disappointed and ended up going to McDonald’s for dinner. 

What if there’s an app that can make this entire process easy? An app that can provide a list of restaurant recommendations tailored to the user’s preference, such as the specific rating (4 or 5 star) and the maximum distance from user’s home. In addition, what if the app can also predict the traffic time before the event date, possibly a few days before or even a few months before? The objective of this project is to create a web-application that can accomplish this using Yelp API, New York taxi data, and Google API (for map-visualization of traffic activity). Specifically, the app will generate the top 10 Yelp-reviewed restaurants based off of the ratings and review counts, along with user-specified inputs such as the type of restaurant, the city that they want to eat in, the minimum and maximum rating, the maximum distance from their location, and the specific time of the day they want to go to the restaurant. In addition, the app will also generate the average traffic times for these restaurants. Overall, this tailored recommendation will help the user decide the restaurant of their preference. 

Yelp dataset offers rich information about businesses, such as ratings, the types of businesses and their locations. The New York taxi data also provides valuable insights into traffic activity in different regions of New York and at different times. However, can these two datasets predict traffic activity to and from a Yelp business (i.e. an Italian Restaurant) in advance? To answer this question, I first analyzed New York traffic data (Green Taxi in June 2016). After preprocessing the date, time, and calculating the trip duration, I visualized average traffic time vs time of the day (Figure 1). As shown in the plot, traffic activity is sensitive to the time of day. I also created two predictive models (linear model and decision tree) to predict the trip duration using the following attributes: pickup and drop off locations, trip distance, time of day, and day of the week. Both models provided low root mean square errors: 5.962 minutes for linear model and 6.216 minutes for regression decision tree, suggesting that with given information about the trip, date, and time, it is possible to predict the trip duration with high accuracy (plus or minus 6 minutes). 

Although these two models are accurate, I wanted to explore other methods of measuring trip duration. One approach is to look at the traffic activity by specific regions of New York. To do this, I downloaded New York city community district data and map this out to the traffic data. With this method, it is possible to look at the duration of trips starting at a location in one community district and ending at another community district.  Another approach is to look at the trips that have starting points nearest the user’s location and ending points nearest the final destination (restaurant) and the average trip duration can be estimated from this information. 
For this preliminary analysis, I decided to use community districts to predict trip duration. However, if admitted into the fellowship, I will compare these approaches and additional models (boosting, neural network, & etc.) to optimize the predictions. I will also use more data from other time periods to increase prediction accuracy. 

Since trip duration prediction is feasible and accurate, it is possible to predict traffic activity from a given location to one or many Yelp-reviewed restaurant(s). For this portion of the preliminary analysis, I created a function that not only output the average traffic time, it also generates a list of top 10 restaurants from user inputs. The function, labeled ‘traffic_hr_df’ in code, does this by taking user-input information about the type of restaurant they interested in, the city preferred, the minimum rating, maximum rating, current location, maximum trip distance (in miles), and the time (the time the individuals are planning to attend). For the top 10 recommendations, I used both the number of review counts and review ratings to create a performance score. The formula for the score is as follow: (n/(max(n)))*(r/(max(r))) where ‘n’ is the number of review counts and ‘r’ is the review rating. The function outputs a list of top 10 restaurants and the approximate traffic time in the given hour. Figure 2 (http://davin-kaing-plot-2.herokuapp.com/index) shows a sample output. This figure ranks the top 10 restaurants by their average traffic time. 

Another feature of the app is to visualize the traffic activity using Google Map API. Although this is not shown in the heroku app, it is plotted in the code. 

This preliminary analysis shows that traffic activity prediction is both feasible and highly accurate. Furthermore, the generated top Yelp restaurant recommendation is an attractive feature for users because instead of browsing through Yelp reviews, they can easily look at top restaurants by performance and other tailored user-specified parameters. If admitted into the fellowship program, future work can be to create a web-application that will take in user-inputted information about a restaurant type, location, rating, and distance, and output a list of recommended restaurants. If the user clicked on one of these restaurants, a google map output will visualize the most optimal directions to the restaurant and visualize traffic activity in different streets. 

